{"version":3,"sources":["webpack:///./src/api/singer.js","webpack:///src/components/singer-detail/singer-detail.vue","webpack:///./src/components/singer-detail/singer-detail.vue?9d89","webpack:///./src/components/singer-detail/singer-detail.vue"],"names":["data","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","commonParams","channel","page","key","pagesize","pagenum","g_tk","loginUin","hostUin","format","inCharset","outCharset","notice","platform","needNewCode","console","log","jsonp","SINGER_URL","options","singerId","uin","singermid","order","from","begin","num","songstatus","SINGER_DETAIL_URL","singer_detail","songs","computed","extends_default","Object","vuex_esm","name","this","singer","fans","toString","length","error","desc","avatar","bgStyle","created","_getDetail","methods","updateSinger","_this","id","then","res","code","config","objs","SingerDesc","_normalizeSongs","list","$router","push","ret","forEach","item","musicData","songid","albumid","song","components","MusicList","music_list","singer_detail_singer_detail","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","src","_v","domProps","innerHTML","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"0DAGO,WACL,IAAMA,EAAOC,OAAkBC,KAC7BC,QAAS,SACTC,KAAM,OACNC,IAAK,cACLC,SAAU,IACVC,QAAS,EACTC,KAAM,WACNC,SAAU,EACVC,QAAS,EACTC,OAAQ,QACRC,UAAW,OACXC,WAAY,QACZC,OAAQ,EACRC,SAAU,MACVC,YAAa,IAGf,OADAC,QAAQC,IAAI,aACLC,YAAMC,IAAYpB,EAAMqB,UAG1B,SAAyBC,GAC9B,IAAMtB,EAAOC,OAAkBC,KAC7BM,KAAM,WACNe,IAAK,EAGLZ,OAAQQ,IACRJ,SAAU,SACVC,YAAa,EACbQ,UAAWF,EACXG,MAAO,SACPC,KAAM,KACNC,MAAO,EACPC,IAAK,IACLC,WAAY,IAGd,OAAOV,YAAMW,IAAmB9B,EAAMqB,qPClBxCU,GACA/B,KADA,WAEA,OACAgC,WAGAC,SAAYC,OAEZC,OAAAC,EAAA,EAAAD,EAGA,YAEAE,KAPA,WAQA,OAAAC,KAAAC,OAAAF,MAEAG,KAVA,WAWA,IAAAZ,EAAAU,KAAAC,OAAAC,KACA,IACA,OAAAZ,EAAAa,WAAAC,OAAA,EACA,QAAAd,EAAA,YAEA,OAAAA,EAAA,IAEA,MAAAe,GACA,iBAGAC,KAtBA,WAuBA,OAAAN,KAAAC,OAAAK,MAEAC,OAzBA,WA0BA,OAAAP,KAAAC,OAAAM,QAEAC,QA5BA,WA6BA,8BAAAR,KAAAC,OAAAM,OAAA,OAGAE,QAtCA,WAuCAT,KAAAU,cAEAC,QAAWf,OACXC,OAAAC,EAAA,EAAAD,EACAe,aAAA,mBAEAF,WAJA,WAIA,IAAAG,EAAAb,KACAA,KAAAC,OAAAa,GAIMjB,OAAAI,EAAA,EAAAJ,CAANG,KAAAC,OAAAa,IAAAC,KAAA,SAAAC,GACA,GAAAA,EAAAC,OAAAC,EAAA,GACA,IAAAC,GACAb,KAAAU,EAAAtD,KAAA0D,WACAlB,KAAAc,EAAAtD,KAAAwC,MAEAW,EAAAD,aAAAO,GACAN,EAAAnB,MAAAmB,EAAAQ,gBAAAL,EAAAtD,KAAA4D,SAVAtB,KAAAuB,QAAAC,KAAA,YAcAH,gBApBA,SAoBAC,GACA,IAAAG,KAQA,OAPAH,EAAAI,QAAA,SAAAC,GAAA,IACAC,EAAAD,EAAAC,UAEAA,EAAAC,QAAAD,EAAAE,SACAL,EAAAD,KAAA3B,OAAAkC,EAAA,EAAAlC,CAAA+B,MAGAH,KAGAO,YACAC,UAAAC,EAAA,IC9FeC,GADEC,OAFjB,WAA0B,IAAAC,EAAArC,KAAasC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,cAAwBE,OAAO3C,KAAA,WAAgByC,EAAA,cAAmBE,OAAOhD,MAAA2C,EAAA3C,MAAAc,QAAA6B,EAAA7B,WAAyCgC,EAAA,OAAYG,YAAA,WAAqBH,EAAA,OAAYE,OAAOE,IAAAP,EAAA9B,YAAkB8B,EAAAQ,GAAA,KAAAL,EAAA,OAA0BG,YAAA,SAAmBH,EAAA,MAAWG,YAAA,OAAAG,UAA6BC,UAAAV,EAAAW,GAAAX,EAAAtC,SAA8BsC,EAAAQ,GAAA,KAAAL,EAAA,OAAwBG,YAAA,SAAmBN,EAAAQ,GAAAR,EAAAW,GAAAX,EAAAnC,SAAAmC,EAAAQ,GAAA,KAAAL,EAAA,OAAmDG,YAAA,OAAAG,UAA6BC,UAAAV,EAAAW,GAAAX,EAAA/B,cAA8B,IAE5gB2C,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE3D,EACA0C,GATF,EAVA,SAAAkB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/3.9b16326ba2e0ef2a3c2b.js","sourcesContent":["import jsonp from 'commons/js/jsonp';\r\nimport {commonParams, options, SINGER_URL, SINGER_DETAIL_URL} from './config';\r\n\r\nexport function getSingerList() {\r\n  const data = Object.assign({}, commonParams,{\r\n    channel: 'singer',\r\n    page: 'list',\r\n    key: 'all_all_all',\r\n    pagesize: 200,\r\n    pagenum: 1,\r\n    g_tk: 1471438518,\r\n    loginUin: 0,\r\n    hostUin: 0,\r\n    format: 'jsonp',\r\n    inCharset: 'utf8',\r\n    outCharset: 'utf-8',\r\n    notice: 0,\r\n    platform: 'yqq',\r\n    needNewCode: 0\r\n  })\r\n  console.log('getsinger')\r\n  return jsonp(SINGER_URL, data, options)\r\n}\r\n\r\nexport function getSingerDetail(singerId) {\r\n  const data = Object.assign({}, commonParams,{\r\n    g_tk: 1471438518,\r\n    uin: 0,\r\n    // loginUin: 0,\r\n    // hostUin: 0,\r\n    format: jsonp,\r\n    platform: 'h5page',\r\n    needNewCode: 1,\r\n    singermid: singerId,\r\n    order: 'listen',\r\n    from: 'h5',\r\n    begin: 0,\r\n    num: 100,\r\n    songstatus: 1\r\n  })\r\n  //根据歌手id获取其mid，以及其100首歌曲(res.data.list)中\r\n  return jsonp(SINGER_DETAIL_URL, data, options)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/singer.js","<template>\r\n  <transition name=\"slide\">\r\n    <music-list :songs=\"songs\" :bgStyle=\"bgStyle\">\r\n      <div class=\"avatar\">\r\n        <img :src=\"avatar\">\r\n      </div>\r\n      <div class=\"info\">\r\n        <h1 class=\"name\" v-html=\"name\"></h1>\r\n        <div class=\"fans\">{{fans}}</div>\r\n        <div class=\"desc\" v-html=\"desc\"></div>\r\n      </div>\r\n    </music-list>\r\n      \r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters,mapMutations} from 'vuex' \r\nimport {getSingerDetail} from 'api/singer'\r\nimport {createSong} from 'commons/js/song'\r\nimport {ERR_OK} from 'api/config'\r\nimport MusicList from 'components/music-list/music-list'\r\n\r\nexport default {\r\n  data() {\r\n      return {\r\n        songs: [],\r\n      }\r\n    },\r\n  computed: {\r\n    //通过mapGetters将数据扩展到computed计算属性中\r\n    ...mapGetters([\r\n      //数组内设置映射，映射属性到对应的getter，返回对应的计算值\r\n      //相当于在Vue实例中挂载了一个叫singer的属性,实例中可使用该属性\r\n      'singer'\r\n    ]),\r\n    name() {\r\n      return this.singer.name;\r\n    },\r\n    fans() {\r\n      let num = this.singer.fans;\r\n      try {\r\n        if (num.toString().length > 5) {\r\n          return \"粉丝: \" + (num / 10000 | 0) + \"万人\"\r\n        }else {\r\n          return \"粉丝: \" + num + \"人\"\r\n        }\r\n      } catch (error) {\r\n          return \"粉丝: \" + 0 + \"人\"\r\n      }\r\n    },\r\n    desc() {\r\n      return this.singer.desc;\r\n    },\r\n    avatar() {\r\n      return this.singer.avatar;\r\n    },\r\n    bgStyle() {\r\n      return `background-image:url(${this.singer.avatar})`;\r\n    },\r\n  },\r\n  created() {\r\n    this._getDetail()\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      updateSinger: 'UPDATE_SINGER'\r\n    }),\r\n    _getDetail() {\r\n      if(!this.singer.id) {\r\n        this.$router.push('/singer')\r\n        return\r\n      }\r\n      getSingerDetail(this.singer.id).then((res) => {\r\n        if(res.code === ERR_OK){\r\n          let objs = {\r\n            desc: res.data.SingerDesc,\r\n            fans: res.data.fans\r\n          }\r\n          this.updateSinger(objs)\r\n          this.songs = this._normalizeSongs(res.data.list)\r\n        }\r\n      })\r\n    },\r\n    _normalizeSongs(list) {\r\n      let ret = []\r\n      list.forEach((item) => {\r\n        let {musicData} = item\r\n        //判断\r\n        if(musicData.songid && musicData.albumid) {\r\n          ret.push(createSong(musicData))\r\n        }\r\n      })\r\n      return ret\r\n    },\r\n  },\r\n  components: {\r\n    MusicList\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"commons/style/variable.scss\";\r\n@import \"commons/style/mixin.scss\";\r\n\r\n\r\n.slide-enter-active, .slide-leave-active{\r\n  transition: all 0.3s;\r\n}\r\n.slide-enter, .slide-leave-to{\r\n  transform: translate3d(100%, 0, 0)\r\n}\r\n\r\n.music-list {\r\n    .avatar {\r\n      img {\r\n        width: 125px;\r\n        height: 100%;\r\n      }\r\n    }\r\n    .info {\r\n      flex: 1;\r\n      padding: 0 10px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      // align-items: center;\r\n      justify-content: center;\r\n      @include ellipsis();\r\n      .name {\r\n        line-height: 40px;\r\n        font-size: $font-size-large;\r\n        color: $color-text;\r\n      }\r\n      .fans {\r\n        font-size: $font-size-medium;\r\n        margin-bottom: 8px;\r\n      }\r\n      .desc {\r\n        font-size: $font-size-small;\r\n        @include ellipsis(2);\r\n        line-height: 1.3em;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/singer-detail/singer-detail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('music-list',{attrs:{\"songs\":_vm.songs,\"bgStyle\":_vm.bgStyle}},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"info\"},[_c('h1',{staticClass:\"name\",domProps:{\"innerHTML\":_vm._s(_vm.name)}}),_vm._v(\" \"),_c('div',{staticClass:\"fans\"},[_vm._v(_vm._s(_vm.fans))]),_vm._v(\" \"),_c('div',{staticClass:\"desc\",domProps:{\"innerHTML\":_vm._s(_vm.desc)}})])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-42bfea26\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/singer-detail/singer-detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-42bfea26\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./singer-detail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer-detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer-detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-42bfea26\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./singer-detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-42bfea26\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/singer-detail/singer-detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}